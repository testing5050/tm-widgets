<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Widgets testing</title>
</head>
<body>
<h1>Discovery widget testing</h1>

<section style="margin-bottom: 50px">
    API key: <input id="apikey" type="text"><button id="apply">Apply API key</button>
</section>

<div class="widget-container widget-container--discovery">
    <div w-type="event-discovery" w-tmapikey="5QGCEXAsJowiCI4n1uAwMlCGAcSNAEmG" w-keyword="" w-theme="simple" w-colorscheme="light" w-width="350" w-height="600" w-size="25" w-border="0" w-borderradius="4" w-postalcode="" w-radius="25" w-period="week" w-layout="vertical" w-attractionid="" w-promoterid="" w-venueid="" w-affiliateid="" w-segmentid="" w-proportion="custom" w-titlelink="off" w-sorting="groupByName" w-id="id_9qsj4" w-countrycode="US" w-source="" w-latlong=""></div>
</div>

<script src="widgets/discovery.js"></script>
<script>
    window.widget = window.widgetsLib.widgetsEventDiscovery[0];
</script>
<script>
    const applyButton = document.getElementById('apply');
    const widget = document.querySelector('div[w-type]');
    const apiKeyInput = document.getElementById('apikey');

    applyButton.addEventListener('click', function (e) {
      widget.setAttribute('w-tmapikey', apiKeyInput.value);
      window.widget.update();
    })
</script>
</body>
</html>
